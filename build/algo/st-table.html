<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="utf-8">
        <title>doingçš„å°ç ´å±‹</title>
        <style>
         img {
             width: 90vw;
             z-index: 1000;
         }
         .pstbdy{
             width: 100vw;
             flex: auto;
         }
         body{
             display: flex;
             flex-direction: column;
         }
         @media screen and (max-width: 750px){
             body{
		 font-size: 5vw !important;
             }
         }
	 /* Sspai Web Theme A theme to [sspai](ssp.ai) default theme. Developed by Codegass(wchweichenhao@gmial.com) & Yves(yves@sspai.com) Download Cuto on the App Store and Google Play! */
	 body {
	     font-size: 15px;
	     color:#333;
	     background:#fff;
	     font-family: Helvetica, Arial, "PingFang SC", "Microsoft YaHei", "WenQuanYi Micro Hei", "tohoma,sans-serif";
	     margin: 0;
	 }
	 h1 {
	     font-size: 2.2em;
	     font-weight: 700;
	     line-height: 1.1;
	     padding-top: 16px;
	     margin-bottom: 4px;
	 }
	 h2, h3, h4, h5, h6 {
	     line-height: 1.5em;
	     margin-top: 2.2em;
	     margin-bottom: 4px;
	 }
	 h2 {
	     font-size: 1.4em;
	     margin: 40px 10px 20px 0;
	     padding-left: 9px;
	     border-left: 6px solid #ff7e79;
	     font-weight: 700;
	     line-height: 1.4;
	 }
	 h3 {
	     font-weight: 700;
	     font-size: 1.2em;
	     line-height: 1.4;
	     margin: 10px 0 5px;
	     padding-top: 10px;
	 }
	 h4 {
	     font-weight: 700;
	     text-transform: uppercase;
	     font-size: 1.1em;
	     line-height: 1.4;
	     margin: 10px 0 5px;
	     padding-top: 10px
	 }
	 h5, h6 {
	     font-size: .9em;
	 }
	 h5 {
	     font-weight: bold;
	     text-transform: uppercase;
	 }
	 h6 {
	     font-weight: normal;
	     color: #AAA;
	 }
	 img {
	     width: 100%;
	     border-radius: 5px;
	     display: block;
	     margin-bottom: 15px;
	     height: auto;
	 }
	 dl,ol,ul {
	     margin-top: 12px;
	     margin-bottom: 20px;
	     padding-left: 5%;
	     line-height: 1.8;
	 }
	 p {
	     margin: 0 0 20px;
	     padding: 0;
	     line-height: 1.8;
	 }
	 a {
	     text-decoration: none;
	     color: black;
	     border-bottom: 1px solid #d71a1b;
	 }
	 a:focus {
	     outline-offset: -2px;
	 }
	 blockquote {
	     font-size: 1em;
	     font-style: normal;
	     padding: 30px 38px;
	     margin: 0 0 15px;
	     position: relative;
	     line-height: 1.8;
	     text-indent: 0;
	     border: none;
	     color: #888;
	 }
	 blockquote:before {
	     content: "â€œ";
	     left: 12px;
	     top: 0;
	     color: #E0E0E0;
	     font-size: 4em;
	     font-family: Arial, serif;
	     line-height: 1em;
	     font-weight: 700;
	     position: absolute;
	 }
	 blockquote:after {
	     content: "â€";
	     right: 12px;
	     bottom: -26px;
	     color: #E0E0E0;
	     font-size: 4em;
	     font-family: Arial, serif;
	     line-height: 1em;
	     font-weight: 700;
	     position: absolute;
	     bottom: -31px;
	 }
	 strong, dfn {
	     font-weight: 700;
	 }
	 em, dfn {
	     font-style: italic;
	     font-weight: 400;
	 }
	 del {
	     text-decoration: line-through;
	 }
	 /*code {font-size:90%;}*/
	 /*pre {text-align:left; overflow-x: scroll; color: #257fa0; background: #f6f6f6; padding: 10pt 15pt; border-radius: 3px; border: solid 1px #e2e2e2;}*/
	 pre {
	     margin: 0 0 10px;
	     font-size: 13px;
	     line-height: 1.42857;
	     word-break: break-all;
	     word-wrap: break-word;
	     border-radius: 4px;
	     white-space: pre-wrap;
	     display: block;
	     background: #f8f8f8;
	     padding: 10px 20px;
	     border: none;
	     margin-bottom: 25px;
	     color: #666;
	     font-family: Courier, sans-serif;
	 }
	 code {
	     color: #c7254e;
	     background-color: #f9f2f4;
	     border-radius: 4px;
	     font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
	     padding: 2px 4px;
	     font-size: 90%;
	 }
	 p > code {
	     color: #c7264e;
	     background-color: #f9f2f4;
	     font-size: .95em;
	     border-radius: 3px;
	     -moz-border-radius: 3px;
	     -webkit-border-radius: 3px;
	 }
	 figure {
	     margin: 1em 0;
	 }
	 figcaption {
	     font-size: 0.75em;
	     padding:0.5em 2em;
	     margin-bottom: 2em;
	 }
	 figure img {
	     margin-bottom: 0px;
	 }
	 hr {
	     margin-top: 20px;
	     margin-bottom: 20px;
	     border: 0;
	     border-top: 1px solid #eee;
	 }
	 ol p, ul p {
	     margin-bottom: 0px;
	 }
	 li {
	     margin-bottom: 0.75em;
	     margin-top: 0.75em;
	 }
	 ol#footnotes {
	     font-size: 0.95em;
	     padding-top: 1em;
	     margin-top: 1em;
	     margin-left: 0;
	     border-top: 1px solid #eaeaea;
	     counter-reset: footer-counter;
	     list-style: none;
	     color: #555;
	     padding-left: 5%;
	     margin: 20px 0;
	 }
	 ol#footnotes li {
	     margin-bottom: 10px;
	     margin-left: 16px;
	     font-weight: 400;
	     line-height: 2;
	     list-style-type: none;
	 }
	 ol#footnotes li:before {
	     content: counter(footer-counter) ". ";
	     counter-increment: footer-counter;
	     font-weight: 800;
	     font-size: .95em;
	 }
	 @keyframes highfade {
	     0% {background-color: none;}
	     20% {background-color: yellow;}
	     100% {background-color: none;}
	 }
	 @-webkit-keyframes highfade {
	     0% {background-color: none;} 
	     20% {background-color: yellow;}
	     100% {background-color: none;}
	 }
	 a:target, ol#footnotes li:target, sup a:target {
	     animation-name: highfade;
	     animation-duration: 2s;
	     animation-iteration-count: 1;
	     animation-timing-function: ease-in-out;
	     -webkit-animation-name: highfade;
	     -webkit-animation-duration: 2s;
	     -webkit-animation-iteration-count: 1;
	     -webkit-animation-timing-function: ease-in-out;
	 }
	 a:target {
	     border:0;
	     outline: 0;
	     animation-iteration-count: 1;
	     -webkit-animation-timing-function: ease-in-out;
	 }
	 a:target {
	     border:0;
	     outline: 0;
	     tion-iteration-count: 1;
	     -webkit-animation-timing-function: ease-in-out;
	 }
	 a:target {
	     border:0;outline: 0;
	 }
	</style>
	<link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/styles/atom-one-dark.min.css">
    </head>
    <body>
        <div style="z-index:999;flex-shrink: 0;"><a href="https://doing1024.us.kg/" style="text-decoration: none;color: black;display:flex;flex-direction: row;flex-warp: nowarp;justify-content: flex-start;">
            <h1>doingçš„å°ç ´å±‹</h1></a></div>
        <div class="pstbdy"><h1 id="stè¡¨ä»‹ç»">STè¡¨ä»‹ç»</h1>
<h2 id="ä»€ä¹ˆæ˜¯rmqé—®é¢˜">ä»€ä¹ˆæ˜¯RMQé—®é¢˜</h2>
<p>RMQï¼ˆåŒºé—´æœ€å€¼é—®é¢˜ï¼‰ï¼ŒæŒ‡å¯¹äºä¸€ä¸ªåºåˆ—<span
class="math inline"><em>A</em></span>ï¼Œè¯¢é—®æ¯ä¸€å¯¹<span
class="math inline">(<em>i</em>,<em>j</em>)</span>ï¼Œæ±‚<span
class="math inline"><em>a</em><sub><em>i</em></sub>Â <em>a</em><sub><em>j</em></sub></span>ä¹‹é—´çš„æœ€å¤§ï¼ˆæˆ–å°ï¼‰å€¼ã€‚ä¸€èˆ¬è¿™æ ·çš„é—®é¢˜ï¼Œä¸€èˆ¬ä¼šæœ‰å¾ˆå¤šæ¬¡è¯¢é—®ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯stè¡¨">ä»€ä¹ˆæ˜¯STè¡¨</h2>
<p>ST è¡¨ï¼ˆSparse Tableï¼Œç¨€ç–è¡¨ï¼‰æ˜¯ç”¨äºè§£å†³
<strong>å¯é‡å¤è´¡çŒ®é—®é¢˜</strong> çš„æ•°æ®ç»“æ„ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯å¯é‡å¤è´¡çŒ®é—®é¢˜">ä»€ä¹ˆæ˜¯å¯é‡å¤è´¡çŒ®é—®é¢˜</h2>
<p>å¯é‡å¤è´¡çŒ®é—®é¢˜æ˜¯æŒ‡ï¼Œå¯¹äºä¸€ä¸ªè¿ç®—<span
class="math inline"><em>o</em><em>p</em><em>t</em></span>ï¼Œæ»¡è¶³<span
class="math inline"><em>x</em><em>o</em><em>p</em><em>t</em><em>x</em>â€„=â€„<em>x</em></span>ï¼Œåˆ™å¯¹åº”<span
class="math inline"><em>o</em><em>p</em><em>t</em></span>æ“ä½œçš„åŒºé—´æŸ¥è¯¢é—®é¢˜å°±æ˜¯<strong>å¯é‡å¤è´¡çŒ®é—®é¢˜</strong>ã€‚
æ¯”å¦‚ï¼Œ<span
class="math inline"><em>m</em><em>a</em><em>x</em>(<em>x</em>,<em>x</em>)â€„=â€„<em>x</em></span>ï¼Œ<span
class="math inline"><em>m</em><em>i</em><em>n</em>(<em>x</em>,<em>x</em>)â€„=â€„<em>x</em></span>ï¼Œæ‰€ä»¥RMQï¼ˆåŒºé—´æœ€å€¼é—®é¢˜ï¼‰å±äºå¯é‡å¤è´¡çŒ®é—®é¢˜ï¼Œå¯ä»¥ç”¨<strong>STè¡¨</strong>è§£å†³ã€‚æ³¨æ„ï¼Œå¯¹äºå…¶ä»–å¯é‡å¤è´¡çŒ®é—®é¢˜ï¼Œ<span
class="math inline"><em>o</em><em>p</em><em>t</em></span>å¿…é¡»æ»¡è¶³äº¤æ¢ç‡æ‰èƒ½ç”¨<strong>STè¡¨</strong>è§£å†³ã€‚</p>
<h1 id="ä¾‹é¢˜">ä¾‹é¢˜</h1>
<p><a href="https://www.luogu.com.cn/problem/P3865">P3865 ã€æ¨¡æ¿ã€‘ST è¡¨
&amp;&amp; RMQ é—®é¢˜</a></p>
<p>é¢˜ç›®å¤§æ„ï¼šç»™å®šä¸¤ä¸ªæ•°<span
class="math inline"><em>N</em></span>å’Œ<span
class="math inline"><em>M</em></span>ï¼Œä¸‹é¢ä¸€è¡Œ<span
class="math inline"><em>N</em></span>ä¸ªæ•°ï¼Œè¡¨ç¤º<span
class="math inline"><em>a</em><sub>1</sub>Â <em>a</em><sub><em>n</em></sub></span>ï¼Œæ¥ä¸‹æ¥<span
class="math inline"><em>M</em></span>è¡Œ,æ¯è¡Œä¸¤ä¸ªæ•°<span
class="math inline"><em>l</em></span>å’Œ<span
class="math inline"><em>r</em></span>ï¼Œè¾“å‡º<span
class="math inline"><em>m</em><em>a</em><em>x</em>(<em>a</em><sub><em>l</em></sub>,<em>a</em><sub><em>l</em>â€…+â€…1</sub>,<em>a</em><sub><em>l</em>â€…+â€…2</sub>,...,<em>a</em><sub><em>r</em></sub>)</span>ã€‚</p>
<h1 id="åšæ³•">åšæ³•</h1>
<p>æˆ‘ä»¬é¦–å…ˆç”¨<span
class="math inline">ğ’ª(<em>n</em>log(<em>n</em>))</span>çš„æ—¶é—´å¤æ‚åº¦å¤„ç†å‡ºåºåˆ—ä¸­æ¯ä¸ªé•¿åº¦ä¸º<span
class="math inline">2<sup><em>x</em></sup></span>æ¬¡æ–¹çš„åŒºé—´ã€‚æˆ‘ä»¬å°±å¯ä»¥å‘ç°ï¼Œä»»æ„ä¸€ä¸ªåŒºé—´éƒ½å¯ä»¥ç”¨è‡³å¤šä¸¤ä¸ªé¢„å¤„ç†è¿‡çš„åŒºé—´è¦†ç›–ã€‚æ‰€ä»¥å¯ä»¥ç”¨<span
class="math inline">ğ’ª(1)</span>çš„æ—¶é—´å¤æ‚åº¦æ±‚è§£æ¯ä¸€ä¸ªè¯¢é—®ã€‚</p>
<p>å› ä¸º<span
class="math inline"><em>m</em><em>a</em><em>x</em></span>æ»¡è¶³å¯é‡å¤è´¡çŒ®ï¼Œæ‰€ä»¥ä¸¤ä¸ªé¢„å¤„ç†è¿‡çš„åŒºé—´é‡åˆçš„éƒ¨åˆ†ä¸ä¼šå½±å“ç»“æœã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆSTè¡¨ä¸èƒ½æ±‚åŒºé—´å’Œçš„åŸå› ã€‚</p>
<h2 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h2>
<p>æˆ‘ä»¬è®¾å®šä¸€ä¸ªæ•°ç»„fç”¨æ¥å‚¨å­˜â€æ¯ä¸ªé•¿åº¦ä¸º<span
class="math inline">2<sup><em>x</em></sup></span>æ¬¡æ–¹çš„åŒºé—´â€œ,è®¾<span
class="math inline"><em>f</em><sub><em>i</em>,â€†<em>j</em></sub></span>ä¸ºåŒºé—´<span
class="math inline">[<em>i</em>,<em>i</em>+2<sup><em>j</em></sup>âˆ’1]</span>çš„æœ€å¤§å€¼ã€‚
æ¯ä¸ªé•¿åº¦ä¸º1çš„åŒºé—´çš„æœ€å¤§å€¼éƒ½æ˜¯è¿™ä¸ªæ•°è‡ªå·±ã€‚å³æ‰€æœ‰<span
class="math inline"><em>f</em><sub><em>i</em>,â€†0</sub>â€„=â€„<em>a</em><sub><em>i</em></sub></span>ã€‚</p>
<p>å¯¹äºå…¶å®ƒçš„åŒºé—´ï¼Œæˆ‘ä»¬ä¸å¿…éå†æ•´ä¸ªåŒºé—´å»å¯»æ‰¾æœ€å¤§å€¼ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸ºä¸¤ä¸ªåŒºé—´ï¼Œå–ä¸¤ä¸ªåŒºé—´çš„æœ€å¤§å€¼çš„æœ€å¤§å€¼ï¼ˆè¯·ä»”ç»†ç†è§£è¿™å¥è¯ï¼‰å³å¯ã€‚æ‰€ä»¥<span
class="math inline"><em>f</em><sub><em>i</em>,â€†<em>j</em></sub>â€„=â€„<em>m</em><em>a</em><em>x</em>(<em>f</em><sub><em>i</em>,â€†<em>j</em>â€…âˆ’â€…1</sub>,<em>f</em><sub><em>i</em>â€…+â€…2<sup><em>j</em>â€…âˆ’â€…1</sup>,â€†<em>j</em>â€…âˆ’â€…1</sub>)</span>
é¢„å¤„ç†éƒ¨åˆ†å‚è€ƒä»£ç ï¼š</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// åˆå§‹st[i][0] = a[i]ï¼Œæ­¤å¤„çœç•¥</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">// log2[n] ä¸ºlog2(n)ï¼Œé€šè¿‡forå¾ªç¯é¢„å¤„ç†å®ç°</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> step <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> step <span class="op">&lt;=</span> log2<span class="op">[</span>n<span class="op">];</span> <span class="op">++</span>step<span class="op">)</span> <span class="co">// å› ä¸ºlog2(n) ^ n = nï¼Œå› æ­¤å¾ªç¯åˆ°log2[n]</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">+</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> step<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">&lt;=</span> n<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="co">// å¾ªç¯åˆ°æœ«å°¾ï¼Œé˜²æ­¢è¶Šç•Œ</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        f<span class="op">[</span>step<span class="op">][</span>i<span class="op">]</span> <span class="op">=</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            max<span class="op">(</span>f<span class="op">[</span>step <span class="op">-</span> <span class="dv">1</span><span class="op">][</span>i<span class="op">],</span> f<span class="op">[</span>step <span class="op">-</span> <span class="dv">1</span><span class="op">][</span>i <span class="op">+</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> <span class="op">(</span>step <span class="op">-</span> <span class="dv">1</span><span class="op">))]);</span> <span class="co">// å–ä¸¤ä¸ªå­åŒºé—´çš„æœ€å¤§å€¼</span></span></code></pre></div>
<p>åˆ°ç°åœ¨ï¼Œé¢„å¤„ç†éƒ¨åˆ†å·²ç»å®Œæˆäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°<span
class="math inline">ğ’ª(1)</span>çš„æŸ¥è¯¢ã€‚
è·Ÿæ®å¯é‡å¤è´¡çŒ®é—®é¢˜çš„æ€§è´¨ï¼Œæˆ‘ä»¬æ— éœ€å–ä¸¤ä¸ªæ­£å¥½æ‹¼æ¥çš„åºåˆ—ï¼Œåªéœ€è¦å–å¾—ä¸¤ä¸ªåºåˆ—è¦†ç›–è¯¢é—®åºåˆ—å³å¯ã€‚æ‰€ä»¥å¯¹äºåŒºé—´<span
class="math inline">(<em>l</em>,<em>r</em>)</span>ï¼Œä¸¤ä¸ªåŒºé—´åˆ†åˆ«æ˜¯<span
class="math inline">[<em>l</em>,<em>l</em>+2<sup><em>s</em></sup>âˆ’1]</span>å’Œ<span
class="math inline">[<em>r</em>âˆ’2<sup><em>s</em></sup>+1,<em>r</em>]</span>ï¼Œå…¶ä¸­<span
class="math inline"><em>s</em>â€„=â€„âŒŠlog<sub>2</sub>(<em>r</em>âˆ’<em>l</em>+1)âŒ‹</span>ã€‚ä¸¤ä¸ªéƒ¨åˆ†çš„æœ€å¤§å€¼å°±æ˜¯ç­”æ¡ˆï¼Œä¸‹é¢ç»™å‡ºè¯¢é—®éƒ¨åˆ†çš„ä»£ç ã€‚</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// l,ræ˜¯è¾“å…¥ç»™å®šçš„æ•°</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> log2<span class="op">[</span>r <span class="op">-</span> l <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>max<span class="op">(</span>f<span class="op">[</span>t<span class="op">][</span>l<span class="op">],</span>f<span class="op">[</span>t<span class="op">][</span>r <span class="op">-</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> t<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">]);</span> <span class="co">// æ±‚ä¸¤ä¸ªåŒºé—´çš„æœ€å¤§å€¼ï¼Œæ³¨æ„ä¸‹æ ‡ç¬¬äºŒç»´æ˜¯æŒ‡åŒºé—´é•¿åº¦ä¸º2^xæ¬¡æ–¹ï¼Œä¸æ˜¯å³ç«¯ç‚¹</span></span></code></pre></div>
</div>
	<script src="https://giscus.app/client.js"
		data-repo="doing1024/doing1024.github.io"
		data-repo-id="R_kgDOMZDXwQ"
		data-category="Q&A"
		data-category-id="DIC_kwDOMZDXwc4Ci8x6"
		data-mapping="pathname"
		data-strict="0"
		data-reactions-enabled="1"
		data-emit-metadata="0"
		data-input-position="top"
		data-theme="light"
		data-lang="zh-CN"
		data-loading="lazy"
		crossorigin="anonymous"
		async>
	</script>
        <script>
         var lst = document.getElementsByTagName("img");
         for (var i = 0;i < lst.length;++i) lst[i].setAttribute("data-zoomable","");
         document.addEventListener('DOMContentLoaded', function () {
             mediumZoom('[data-zoomable]');
         });
        </script>
    </body>
    <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://unpkg.com/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script>
</html>
